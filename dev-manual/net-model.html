<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7. Network Model Object &mdash; MATPOWER Documentation 8.0b1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/css/matpower.css?v=f6466fd7" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=d50bc636"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script>window.MathJax = {"loader": {"load": ["[tex]/upgreek"]}, "tex": {"packages": {"[+]": ["upgreek"]}, "macros": {"dg": "\\sp\\dagger", "trans": ["{#1}^{\\mathsf{T}}", 1], "conj": ["{#1}^{\\ast}", 1], "hc": ["{#1}^{\\dg}", 1], "hconj": ["{#1}^{+}", 1], "diag": ["\\left[^\\smallsetminus{#1}_\\smallsetminus\\right]", 1], "diagg": ["\\left[\\smash{#1}\\right]", 1], "cdiag": ["\\conj{\\diag{#1}}", 1], "der": ["\\frac{\\partial{#1}}{\\partial{#2}}", 2], "dersx": ["\\frac{\\partial^2{#1}}{\\partial{#2}^2}", 2], "dersxy": ["\\frac{\\partial^2{#1}}{\\partial{#2}\\partial{#3}}", 3], "cscal": ["\\mathrm{#1}", 1], "rvec": ["{\\boldsymbol{#1}}", 1], "cvec": ["\\mathbf{#1}", 1], "rmat": ["{\\boldsymbol{#1}}", 1], "cmat": ["\\mathbf{#1}", 1], "rvecG": ["{\\boldsymbol{#1}}", 1], "cvecG": ["\\boldsymbol{#1}", 1], "rmatG": ["\\boldsymbol{\\mathit{#1}}", 1], "cmatG": ["\\mathbf{#1}", 1], "param": ["\\underline{#1}", 1], "ov": ["{\\overline{#1}}", 1], "zeros": ["\\rvec{0}", 0], "ones": ["\\rvec{1}_{#1}", 1], "onest": ["\\trans{\\rvec{1}}_{#1}", 1], "Id": ["\\diag{\\ones{#1}}", 1], "R": "\\mathbb{R}}         % requires \\usepackage{amsfonts|bbold", "C": "\\mathbb{C}}         % requires \\usepackage{amsfonts", "av": "\\cvec{a}", "bv": "\\cvec{b}", "cv": "\\cvec{c}", "f": "\\cscal{f}", "F": "\\cvec{f}", "g": "\\rvec{g}", "G": "\\cvec{g}", "h": "\\rvec{h}", "HH": "\\cvec{h}", "x": "\\rvec{x}", "y": "\\rvec{y}", "z": "\\rvec{z}", "X": "\\cvec{x}", "Z": "\\cvec{z}", "A": "\\cmat{A}", "B": "\\cmat{B}", "alphav": "\\rvecG{\\alpha}", "lam": "\\rvecG{\\lambda}", "lamh": "\\hat{\\lam}", "muv": "\\rvecG{\\mu}", "muhv": "\\hat{\\muv}", "vv": "\\rvec{v}", "vvi": ["\\cscal{v}_{#1}", 1], "V": "\\cvec{v}", "Vh": "\\hat{\\V}", "Vc": "\\conj{\\V}", "Vhc": "\\conj{\\Vh}", "dV": "\\diag{\\V}", "dVh": "\\diag{\\Vh}", "dVc": "\\diag{\\Vc}", "dVhc": "\\diag{\\Vhc}", "inV": "\\cvec{\\Lambda}", "inVh": "\\hat{\\inV}", "inVc": "\\conj{\\inV}", "inVhc": "\\conj{\\inVh}", "dinV": "\\diagg{\\inV}", "dinVh": "\\diagg{\\inVh}", "dinVc": "\\diagg{\\inVc}", "dinVhc": "\\diagg{\\inVhc}", "va": ["\\theta", 0], "vai": ["\\va_{#1}", 1], "Va": ["\\rvec{\\va}", 0], "Vah": ["\\hat{\\Va}", 0], "vm": ["\\nu", 0], "vmi": ["\\nu_{#1}", 1], "Vm": ["\\rvecG{\\nu}", 0], "dVm": "\\diag{\\Vm}", "dVmi": "\\dVm^{-1}", "Vmh": "\\hat{\\Vm}", "dVmh": "\\diag{\\Vmh}", "dVmhi": "\\dVmh^{-1}", "vr": "u", "vri": ["u_{#1}", 1], "vi": "w", "vii": ["w_{#1}", 1], "Vr": "\\rvec{u}", "Vi": "\\rvec{w}", "dVr": "\\diag{\\Vr}", "dVi": "\\diag{\\Vi}", "Vrh": "\\hat{\\Vr}", "Vih": "\\hat{\\Vi}", "dVrh": "\\diag{\\Vrh}", "dVih": "\\diag{\\Vih}", "E": "\\cvec{e}", "Eh": "\\hat{\\E}", "Ec": "\\conj{\\E}", "Ehc": "\\conj{\\Eh}", "dE": "\\diag{\\E}", "dEh": "\\diag{\\Eh}", "dEc": "\\diag{\\Ec}", "dEhc": "\\diag{\\Ehc}", "zr": "{z_r}", "zi": "{z_i}", "Zr": "{\\rvec{z}_r}", "Zi": "{\\rvec{z}_i}", "dlam": "\\diagg{\\lam}", "dlamh": "\\diagg{\\lamh}", "dlamva": "\\diagg{\\lam_\\va}", "dlamvm": "\\diagg{\\lam_\\vm}", "dlamvr": "\\diagg{\\lam_\\vr}", "dlamvi": "\\diagg{\\lam_\\vi}", "dlamzr": "\\diagg{\\lam_\\zr}", "dlamzi": "\\diagg{\\lam_\\zi}", "dlamhva": "\\diagg{\\lamh_\\va}", "dlamhvm": "\\diagg{\\lamh_\\vm}", "dlamhvr": "\\diagg{\\lamh_\\vr}", "dlamhvi": "\\diagg{\\lamh_\\vi}", "dlamhzr": "\\diagg{\\lamh_\\zr}", "dlamhzi": "\\diagg{\\lamh_\\zi}", "dmu": "\\diag{\\muv}", "dmuh": "\\diag{\\muhv}", "kk": "\\rvec{k}", "J": "\\param{\\rmat{J}}", "Jt": "\\trans{\\J}", "Jk": ["\\J_{\\kk_#1}", 1], "Ah": "\\hat{\\A}", "Fh": "\\hat{\\F}", "Gh": "\\hat{\\G}", "gh": "\\hat{\\g}", "fmax": "\\param{\\rvec{f}}_\\mathrm{max}", "gP": "\\g^P", "gPk": ["\\g^{P,#1}", 1], "fhmax": "\\hat{\\param{\\rvec{f}}}_\\mathrm{max}", "ghP": "\\gh^P", "ghPk": ["\\gh^{P,#1}", 1], "GS": "\\G^S", "GI": "\\G^I", "GSk": ["\\G^{S,#1}", 1], "GIk": ["\\G^{I,#1}", 1], "GSsys": "\\GSk{\\mathrm{sys}}", "GIsys": "\\GIk{\\mathrm{sys}}", "gPsys": "\\gPk{\\mathrm{sys}}", "GhS": "\\Gh^S", "GhI": "\\Gh^I", "GhSk": ["\\Gh^{S,#1}", 1], "GhIk": ["\\Gh^{I,#1}", 1], "GhSsys": "\\GhSk{\\mathrm{sys}}", "GhIsys": "\\GhIk{\\mathrm{sys}}", "ghPsys": "\\ghPk{\\mathrm{sys}}", "Ilin": "\\cvec{i}^{lin}", "Ilink": "\\cvec{i}^{lin, k}", "Ilinc": "\\conj{\\Ilin}", "dIlin": "\\diag{\\Ilin}", "dIlinc": "\\diag{\\Ilinc}", "Ilinh": "\\hat{{\\cvec{i}}}^{lin}", "Ilinhk": "\\hat{\\cvec{i}}^{lin, k}", "Ilinhc": "\\conj{\\Ilinh}", "dIlinh": "\\diag{\\Ilinh}", "dIlinhc": "\\diag{\\Ilinhc}", "Slin": "\\cvec{s}^{lin}", "Slink": "\\cvec{s}^{lin, k}", "Slinc": "\\conj{\\Slin}", "dSlin": "\\diag{\\Slin}", "dSlinc": "\\diag{\\Slinc}", "Slinh": "\\hat{\\cvec{s}}^{lin}", "Slinhk": "\\hat{\\cvec{s}}^{lin, k}", "Slinhc": "\\conj{\\Slinh}", "dSlinh": "\\diag{\\Slinh}", "dSlinhc": "\\diag{\\Slinhc}", "Inln": "\\cvec{i}^{nln}", "Inlnk": "\\cvec{i}^{nln, k}", "Snln": "\\cvec{s}^{nln}", "Snlnk": "\\cvec{s}^{nln, k}", "Inlnh": "\\hat{\\cvec{i}}^{nln}", "Inlnhk": "\\hat{\\cvec{i}}^{nln, k}", "Snlnh": "\\hat{\\cvec{s}}^{nln}", "Snlnhk": "\\hat{\\cvec{s}}^{nln, k}", "Aa": "\\param{\\rmat{A}}", "BB": "\\param{\\rmat{B}}", "CC": "\\param{\\rmat{C}}", "DD": "\\param{\\rmat{D}}", "YY": "\\param{\\cmat{Y}}", "iv": "\\param{\\cvec{i}}", "pv": "\\param{\\rvec{p}}", "sv": "\\param{\\cvec{s}}", "KK": "\\param{\\rmat{K}}", "LL": "\\param{\\cmat{L}}", "MM": "\\param{\\cmat{M}}", "NN": "\\param{\\cmat{N}}", "BBh": "\\hat{\\BB}", "YYh": "\\hat{\\YY}", "ivh": "\\hat{\\iv}", "pvh": "\\hat{\\pv}", "svh": "\\hat{\\sv}", "CCh": "\\hat{\\CC}", "KKh": "\\hat{\\KK}", "LLh": "\\hat{\\LL}", "MMh": "\\hat{\\MM}", "NNh": "\\hat{\\NN}", "AT": "\\trans{\\Aa}", "CT": "\\trans{\\CC}", "DT": "\\trans{\\DD}", "Ap": "\\Aa'", "Cp": "\\CC\\:\\!'", "Dp": "\\DD'", "ApT": "\\trans{\\Ap}", "CpT": "\\trans{\\Cp}", "DpT": "\\trans{\\Dp}", "ChT": "\\trans{\\CCh}", "Lc": "\\conj{\\LL}", "LcT": "\\trans{\\Lc}", "Lhc": "\\conj{\\LLh}", "LhcT": "\\trans{\\Lhc}", "MT": "\\trans{\\MM}", "Mc": "\\conj{\\MM}", "McT": "\\trans{\\Mc}", "dMTlam": "\\diag{\\MT \\lam}", "MhT": "\\trans{\\MMh}", "Mhc": "\\conj{\\MMh}", "MhcT": "\\trans{\\Mhc}", "dMhTlam": "\\diag{\\MhT \\lamh}", "Nc": "\\conj{\\NN}", "NcT": "\\trans{\\Nc}", "Nhc": "\\conj{\\NNh}", "NhcT": "\\trans{\\Nhc}", "YT": "\\trans{\\YY}", "Yc": "\\conj{\\YY}", "YcT": "\\trans{\\Yc}", "dYTlam": "\\diag{\\YT \\lam}", "YhT": "\\trans{\\YYh}", "Yhc": "\\conj{\\YYh}", "YhcT": "\\trans{\\Yhc}", "dYhTlam": "\\diag{\\YhT \\lamh}", "I": "\\cvec{i}^S", "s": "\\cvec{s}^I", "Ih": "\\hat{\\cvec{i}}^S", "Sh": "\\hat{\\cvec{s}}^I", "AtX": "\\AT \\X", "CtV": "\\CT \\V", "dCtV": "\\diag{\\CtV}", "DtZ": "\\DT \\Z", "ApTx": "\\ApT \\x", "CpTv": "\\CpT \\vv", "DpTz": "\\DpT \\z"}}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8. Mathematical Model Object" href="math-model.html" />
    <link rel="prev" title="6. Data Model Converter Object" href="data-model-converter.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #568085" >

          
          
          <a href="../index.html" class="icon icon-home">
            MATPOWER Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://matpower.org">matpower.org</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://matpower.org/about/get-started/">Get Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Manuals</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../users-manual/index.html"><span class="raw-html">M<span style="font-size:smaller">ATPOWER</span></span> User’s Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html"><span class="raw-html">M<span style="font-size:smaller">ATPOWER</span></span> Developer’s Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="notation.html">2. Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">3. Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="task.html">4. Task Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-model.html">5. Data Model Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-model-converter.html">6. Data Model Converter Object</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7. Network Model Object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#network-model-formulations">7.1. Network Model Formulations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dc-formulation">7.1.1. DC Formulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ac-formulations">7.1.2. AC Formulations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#network-models">7.2. Network Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#building-a-network-model">7.2.1. Building a Network Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-types">7.2.2. Node Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#network-model-elements">7.3. Network Model Elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-elements">7.3.1. Example Elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-element-parameters">7.3.2. Building Element Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aggregation">7.3.3. Aggregation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="math-model.html">8. Mathematical Model Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="customizing.html">9. Customizing <span class="raw-html">M<span style="font-size:smaller">ATPOWER</span></span></a></li>
<li class="toctree-l2"><a class="reference internal" href="acknowledgments.html">10. Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html">11. References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ref-manual/index.html"><span class="raw-html">M<span style="font-size:smaller">ATPOWER</span></span> Reference Manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mptest/index.html">MP-Test User’s Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS User’s Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mpom/index.html"><span class="raw-html">MP-Opt-Model</span> User’s Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../most/index.html">MOST User’s Manual</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://matpower.org/doc/manuals/">All Legacy PDF Manuals</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/element.html">How to Create a New Element Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/add-constraint.html">How to Add an OPF Constraint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/extension.html">How to Create an Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/three-phase.html">How to Run a Three-Phase Power Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/builddocs.html">How to Build the Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tech Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tech-notes.html"><span class="raw-html">M<span style="font-size:smaller">ATPOWER</span></span> Technical Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://matpower.org/sponsor">Donate</a></li>
<li class="toctree-l1"><a class="reference external" href="https://matpower.org/download">Downloads</a></li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/MATPOWER/matpower">GitHub Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #568085" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MATPOWER Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="raw-html">M<span style="font-size:smaller">ATPOWER</span></span> Developer’s Manual</a></li>
      <li class="breadcrumb-item active"><span class="section-number">7. </span>Network Model Object</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/dev-manual/net-model.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="data-model-converter.html" class="btn btn-neutral float-left" title="6. Data Model Converter Object" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="math-model.html" class="btn btn-neutral float-right" title="8. Mathematical Model Object" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="network-model-object">
<span id="sec-net-model"></span><h1><span class="section-number">7. </span>Network Model Object<a class="headerlink" href="#network-model-object" title="Link to this heading"></a></h1>
<p>The network model defines the states of and connections between network elements, as well as the parameters and functions defining the relationships between states and port injections. This network model with a unified structure is <em>the key</em> to a flexible modular design where model elements can simply define a few parameters and all of the mathematics involved in computing injections and their derivatives for a given state is handled automatically.</p>
<p>One of the unique features of the network model is that the network model object, which contains network model elements, <strong>is a</strong> network model element itself. Each network model element can optionally define the following:</p>
<ul class="simple">
<li><p><strong>nodes</strong> to serve as network connection points</p></li>
<li><p><strong>ports</strong> for connecting to network nodes</p></li>
<li><p><strong>states</strong> which fully capture the element’s operating condition</p></li>
</ul>
<p>There are two types of states that make up the element’s full state variable <span class="math notranslate nohighlight">\(\X\)</span>, voltage states <span class="math notranslate nohighlight">\(\V\)</span> associated with each port, and optional non-voltage states <span class="math notranslate nohighlight">\(\Z\)</span>. The network model object inherits from <a class="reference internal" href="../mpom/classes/mp_idx_manager.html#mp_idx_manager" title="mp_idx_manager"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp_idx_manager</span></code></a> from <span class="raw-html"><a href="https://github.com/MATPOWER/mp-opt-model">MP-Opt-Model</a></span> to track and index the nodes, ports, and states added by its elements, and the corresponding voltage and non-voltage state variables.</p>
<p>A given network model implements a specific network model <strong>formulation</strong>.
<a class="reference internal" href="#fig-ac-net-element-model"><span class="std std-numref">Figure 7.1</span></a> shows the structure of an AC network model for an element with <span class="math notranslate nohighlight">\(n_p\)</span> connection ports and <span class="math notranslate nohighlight">\(n_z\)</span> non-voltage states.</p>
<figure class="align-center" id="id4">
<span id="fig-ac-net-element-model"></span><a class="reference internal image-reference" href="../_images/mp-element-ac-model.png"><img alt="AC Model for Element with n_p Ports" src="../_images/mp-element-ac-model.png" style="width: 360px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 7.1 </span><span class="caption-text">AC Model for Element with <span class="math notranslate nohighlight">\(n_p\)</span> Ports</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The MP-Element technical note, <span class="raw-html"><a href="https://matpower.org/docs/TN5-MP-Element.pdf"><em>M<span style="font-size:smaller">ATPOWER</span> Technical Note 5</em></a></span> <a class="reference internal" href="references.html#tn5" id="id1"><span>[TN5]</span></a>, includes a lot more detail on the network model and especially on the mathematics involved in the model formulations.</p>
<section id="network-model-formulations">
<span id="sec-net-model-formulations"></span><h2><span class="section-number">7.1. </span>Network Model Formulations<a class="headerlink" href="#network-model-formulations" title="Link to this heading"></a></h2>
<p>Each concrete network model element class, including the container class, inherits from a specific subclass of <a class="reference internal" href="../ref-manual/classes/mp/form.html#mp.form" title="mp.form"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.form</span></code></a>. That is, it implements a specific network model formulation. For example, <a class="reference internal" href="#fig-nm-form-classes"><span class="std std-numref">Figure 7.2</span></a> shows the corresponding classes for the three network model formulations currently implemented, (1) DC, (2) AC with cartesian voltage representation, and (3) AC with polar voltage representation.</p>
<figure class="align-center" id="id5">
<span id="fig-nm-form-classes"></span><a class="reference internal image-reference" href="../_images/nm-form-classes.png"><img alt="Network Model Formulation Classes" src="../_images/nm-form-classes.png" style="width: 380px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 7.2 </span><span class="caption-text">Network Model Formulation Classes</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>By convention, network model formulation class names begin with <code class="docutils literal notranslate"><span class="pre">mp.form</span></code>. It is the formulation class that defines the network model’s parameters and methods for accessing them. It also defines the form of the state variables, real or complex, and methods for computing injections as a function of the state, and in the case of nonlinear formulations, corresponding derivatives as well.</p>
<p>All formulations share a common structure, illustrated in <a class="reference internal" href="#fig-ac-net-element-model"><span class="std std-numref">Figure 7.1</span></a>, with ports, corresponding voltage states, non-voltage states, and functions of predefined form for computing port injections from the state.</p>
<section id="dc-formulation">
<span id="sec-nm-formulations-dc"></span><h3><span class="section-number">7.1.1. </span>DC Formulation<a class="headerlink" href="#dc-formulation" title="Link to this heading"></a></h3>
<p>For the DC formulation, the state vector <span class="math notranslate nohighlight">\(\x\)</span> is real valued and the port injection function is defined in terms of active power injections. The state begins with the <span class="math notranslate nohighlight">\(n_p \times 1\)</span> vector <span class="math notranslate nohighlight">\(\Va\)</span> of voltage angles at the <span class="math notranslate nohighlight">\(n_p\)</span> ports, and may include an <span class="math notranslate nohighlight">\(n_\z \times 1\)</span> real vector of additional state variables <span class="math notranslate nohighlight">\(\z\)</span>, for a total of <span class="math notranslate nohighlight">\(n_\x\)</span> state variables.</p>
<div class="math notranslate nohighlight" id="equation-eq-xk-dc">
<span class="eqno">(7.1)<a class="headerlink" href="#equation-eq-xk-dc" title="Link to this equation"></a></span>\[\begin{split}\x = \left[\begin{array}{c}
\Va \\
\z
\end{array}\right]\end{split}\]</div>
<p>The port injection function in this case defines the active power port injections as a linear function of a set of parameters <span class="math notranslate nohighlight">\(\BB\)</span>, <span class="math notranslate nohighlight">\(\KK\)</span> and <span class="math notranslate nohighlight">\(\pv\)</span>, where <span class="math notranslate nohighlight">\(\BB\)</span> is an <span class="math notranslate nohighlight">\(n_p \times n_p\)</span> susceptance matrix, <span class="math notranslate nohighlight">\(\KK\)</span> is an <span class="math notranslate nohighlight">\(n_p \times n_\z\)</span> matrix coefficient for a linear power injection function, and <span class="math notranslate nohighlight">\(\pv\)</span> is an <span class="math notranslate nohighlight">\(n_p \times 1\)</span> constant power injection.</p>
<div class="math notranslate nohighlight" id="equation-eq-gkpx">
<span class="eqno">(7.2)<a class="headerlink" href="#equation-eq-gkpx" title="Link to this equation"></a></span>\[\begin{split}\gP(\x) &amp;= \left[\begin{array}{cc}\BB &amp; \KK\end{array}\right] \x + \pv \\
&amp;= \BB \Va + \KK \z + \pv\end{split}\]</div>
</section>
<section id="ac-formulations">
<span id="sec-nm-formulations-ac"></span><h3><span class="section-number">7.1.2. </span>AC Formulations<a class="headerlink" href="#ac-formulations" title="Link to this heading"></a></h3>
<p>For the AC formulations, the state vector <span class="math notranslate nohighlight">\(\X\)</span> is complex valued and there are two port injection functions, one for complex power injections and one for current injections, as shown in <a class="reference internal" href="#fig-ac-net-element-model"><span class="std std-numref">Figure 7.1</span></a>. The state begins with the <span class="math notranslate nohighlight">\(n_p \times 1\)</span> vector <span class="math notranslate nohighlight">\(\V\)</span> of complex voltages at the <span class="math notranslate nohighlight">\(n_p\)</span> ports, and may include an <span class="math notranslate nohighlight">\(n_\Z \times 1\)</span> real vector of additional state variables <span class="math notranslate nohighlight">\(\Z\)</span>, for a total of <span class="math notranslate nohighlight">\(n_\X\)</span> state variables.</p>
<div class="math notranslate nohighlight" id="equation-eq-xk-ac">
<span class="eqno">(7.3)<a class="headerlink" href="#equation-eq-xk-ac" title="Link to this equation"></a></span>\[\begin{split}\X = \left[\begin{array}{c}
\V \\
\Z
\end{array}\right]\end{split}\]</div>
<p>The port injection functions for the model, both complex power injection <span class="math notranslate nohighlight">\(\GS(\X)\)</span> and complex current injection <span class="math notranslate nohighlight">\(\GI(\X)\)</span>, are defined by three terms, a linear current injection component <span class="math notranslate nohighlight">\(\Ilin(\X)\)</span>, a linear power injection component <span class="math notranslate nohighlight">\(\Slin(\X)\)</span>, and an arbitrary nonlinear component, <span class="math notranslate nohighlight">\(\Snln(\X)\)</span> or <span class="math notranslate nohighlight">\(\Inln(\X)\)</span>, respectively.</p>
<p>The linear current and power injection components are expressed in terms of the six parameters, <span class="math notranslate nohighlight">\(\YY\)</span>, <span class="math notranslate nohighlight">\(\LL\)</span>, <span class="math notranslate nohighlight">\(\MM\)</span>, <span class="math notranslate nohighlight">\(\NN\)</span>, <span class="math notranslate nohighlight">\(\iv\)</span>, and <span class="math notranslate nohighlight">\(\sv\)</span>. The admittance matrix <span class="math notranslate nohighlight">\(\YY\)</span> and linear power coefficient matrix <span class="math notranslate nohighlight">\(\MM\)</span> are <span class="math notranslate nohighlight">\(n_p \times n_p\)</span>, linear coefficient matrices <span class="math notranslate nohighlight">\(\LL\)</span> and <span class="math notranslate nohighlight">\(\NN\)</span> are <span class="math notranslate nohighlight">\(n_p \times n_\Z\)</span>, and <span class="math notranslate nohighlight">\(\iv\)</span> and <span class="math notranslate nohighlight">\(\sv\)</span> are <span class="math notranslate nohighlight">\(n_p \times 1\)</span> vectors of constant current and power injections, respectively.</p>
<div class="math notranslate nohighlight" id="equation-eq-ilin">
<span class="eqno">(7.4)<a class="headerlink" href="#equation-eq-ilin" title="Link to this equation"></a></span>\[\begin{split}\Ilin(\X) &amp;= \left[\begin{array}{cc}\YY &amp; \LL\end{array}\right] \X + \iv \\
&amp;= \YY \V + \LL \Z + \iv\end{split}\]</div>
<div class="math notranslate nohighlight" id="equation-eq-slin">
<span class="eqno">(7.5)<a class="headerlink" href="#equation-eq-slin" title="Link to this equation"></a></span>\[\begin{split}\Slin(\X) &amp;= \left[\begin{array}{cc}\MM &amp; \NN\end{array}\right] \X + \sv \\
&amp;= \MM \V + \NN \Z + \sv\end{split}\]</div>
<p>Note that the arbitrary <em>nonlinear</em> injection component, represented by either <span class="math notranslate nohighlight">\(\Snln(\X)\)</span> or <span class="math notranslate nohighlight">\(\Inln(\X)\)</span>, corresponds to a single set of injections represented either as a complex power injection or as a complex current injection, but not both. Since the functions represent the same set of injections, they are not additive components, but rather must be related to one another by the following relationship.</p>
<div class="math notranslate nohighlight" id="equation-dev-manual-net-model-0">
<span class="eqno">(7.6)<a class="headerlink" href="#equation-dev-manual-net-model-0" title="Link to this equation"></a></span>\[\Snln(\X) = \dV \conj{\left( \Inln(\X) \right)}\]</div>
<section id="complex-power-injections">
<h4>Complex Power Injections<a class="headerlink" href="#complex-power-injections" title="Link to this heading"></a></h4>
<p>Then the port injection function for complex power can be written as follows.</p>
<div class="math notranslate nohighlight" id="equation-eq-gks">
<span class="eqno">(7.7)<a class="headerlink" href="#equation-eq-gks" title="Link to this equation"></a></span>\[\begin{split}\GS(\X) &amp;= \dV \conj{\left( \Ilin(\X) \right)} + \Slin(\X) + \Snln(\X) \\
&amp;= \dV \conj{\left( \YY \V + \LL \Z + \iv \right)} + \MM \V + \NN \Z + \sv + \Snln(\X)\end{split}\]</div>
</section>
<section id="complex-current-injections">
<h4>Complex Current Injections<a class="headerlink" href="#complex-current-injections" title="Link to this heading"></a></h4>
<p>Similarly, the port injection function for complex current can be written as follows.</p>
<div class="math notranslate nohighlight" id="equation-eq-gki">
<span class="eqno">(7.8)<a class="headerlink" href="#equation-eq-gki" title="Link to this equation"></a></span>\[\begin{split}\GI(\X) &amp;= \Ilin(\X) + \cdiag{\Slin(\X)} \inVc + \Inln(\X) \\
&amp;= \YY \V + \LL \Z + \iv + \cdiag{\MM \V + \NN \Z + \sv} \inVc + \Inln(\X)\end{split}\]</div>
<p>The derivatives of <span class="math notranslate nohighlight">\(\Snln\)</span> and <span class="math notranslate nohighlight">\(\Inln\)</span> are assumed to be provided explicitly, and the derivatives of the other terms of <a class="reference internal" href="#equation-eq-gks">(7.7)</a> and <a class="reference internal" href="#equation-eq-gki">(7.8)</a> are derived in <a class="reference internal" href="references.html#tn5" id="id2"><span>[TN5]</span></a>.</p>
</section>
</section>
</section>
<section id="network-models">
<h2><span class="section-number">7.2. </span>Network Models<a class="headerlink" href="#network-models" title="Link to this heading"></a></h2>
<p>A network model object is primarily a container for network model element objects and <em>is itself</em> a network model element. All network model classes inherit from <a class="reference internal" href="../ref-manual/classes/mp/net_model.html#mp.net_model" title="mp.net_model"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.net_model</span></code></a> and therefore also from <a class="reference internal" href="../ref-manual/classes/mp/element_container.html#mp.element_container" title="mp.element_container"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.element_container</span></code></a>, <a class="reference internal" href="../mpom/classes/mp_idx_manager.html#mp_idx_manager" title="mp_idx_manager"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp_idx_manager</span></code></a>, and <a class="reference internal" href="../ref-manual/classes/mp/nm_element.html#mp.nm_element" title="mp.nm_element"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.nm_element</span></code></a>. Concrete network model classes are also formulation-specific, inheriting from a corresponding subclass of <a class="reference internal" href="../ref-manual/classes/mp/form.html#mp.form" title="mp.form"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.form</span></code></a> as shown in <a class="reference internal" href="#fig-net-model-classes"><span class="std std-numref">Figure 7.3</span></a>.</p>
<figure class="align-center" id="id6">
<span id="fig-net-model-classes"></span><a class="reference internal image-reference" href="../_images/net-model-classes.png"><img alt="Network Model Classes" src="../_images/net-model-classes.png" style="width: 550px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 7.3 </span><span class="caption-text">Network Model Classes</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>By convention, network model variables are named <code class="docutils literal notranslate"><span class="pre">nm</span></code> and network model class names begin with <code class="docutils literal notranslate"><span class="pre">mp.net_model</span></code>.</p>
<section id="building-a-network-model">
<h3><span class="section-number">7.2.1. </span>Building a Network Model<a class="headerlink" href="#building-a-network-model" title="Link to this heading"></a></h3>
<p>A network model object is created in two steps. The first is to call the constructor of the desired network model class, without arguments. This initializes the <a class="reference internal" href="../ref-manual/classes/mp/element_container.html#mp.element_container.element_classes" title="mp.element_container.element_classes"><code class="xref mat mat-attr docutils literal notranslate"><span class="pre">element_classes</span></code></a> property with a list of network model element classes. This list can be modified before the second step, which is to call the <a class="reference internal" href="../ref-manual/classes/mp/net_model.html#mp.net_model.build" title="mp.net_model.build"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">build()</span></code></a> method, passing in the data model object.</p>
<div class="highlight-octave notranslate" id="code-net-model-build"><div class="highlight"><pre><span></span><span class="n">nm</span> <span class="p">=</span> <span class="n">mp</span><span class="p">.</span><span class="n">net_model_acp</span><span class="p">();</span>
<span class="n">nm</span><span class="p">.</span><span class="n">build</span><span class="p">(</span><span class="n">dm</span><span class="p">);</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../ref-manual/classes/mp/net_model.html#mp.net_model.build" title="mp.net_model.build"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">build()</span></code></a> method proceeds through the following stages sequentially, looping through each element at each stage.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><strong>Create</strong> – Instantiate each element object.</p></li>
<li><p><strong>Count and add</strong> - For each element object, determine the number of online elements from the corresponding data model element and, if nonzero, store it in the object and add the object to the <a class="reference internal" href="../ref-manual/classes/mp/element_container.html#mp.element_container.elements" title="mp.element_container.elements"><code class="xref mat mat-attr docutils literal notranslate"><span class="pre">elements</span></code></a> property of the <code class="docutils literal notranslate"><span class="pre">nm</span></code>.</p></li>
<li><p><strong>Add nodes</strong> – Allow each element to add network nodes, then add voltage variables for each node.</p></li>
<li><p><strong>Add states</strong> – Allow each element to add non-voltage states, then add non-voltage variables for each state.</p></li>
<li><p><strong>Build parameters</strong> – Construct the formulation-specific model parameters for each element, including mappings of element port to network node and element non-voltage state to system non-voltage variable. Add ports to the container object for each element to track per-element port indexing.</p></li>
</ol>
</div></blockquote>
</section>
<section id="node-types">
<h3><span class="section-number">7.2.2. </span>Node Types<a class="headerlink" href="#node-types" title="Link to this heading"></a></h3>
<p>Most problems require that certain nodes be given special treatment depending on their <em>type</em>. For example, in the power flow problem, there is typically a single <strong>reference</strong> node, some <strong>PV</strong> nodes, with the rest being <strong>PQ</strong> nodes.</p>
<p>In the current design, each node-creating network model element class implements a <a class="reference internal" href="../ref-manual/classes/mp/nm_element.html#mp.nm_element.node_types" title="mp.nm_element.node_types"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">node_types()</span></code></a> method that returns information about the types of the nodes it creates. The container object <a class="reference internal" href="../ref-manual/classes/mp/nm_element.html#mp.nm_element.node_types" title="mp.nm_element.node_types"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">node_types()</span></code></a> method assembles that information for the full set of network nodes. It can also optionally, assign a new reference node if one does not exist. There are also methods, namely <a class="reference internal" href="../ref-manual/classes/mp/nm_element.html#mp.nm_element.set_node_type_ref" title="mp.nm_element.set_node_type_ref"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">set_node_type_ref()</span></code></a>, <a class="reference internal" href="../ref-manual/classes/mp/nm_element.html#mp.nm_element.set_node_type_pv" title="mp.nm_element.set_node_type_pv"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">set_node_type_pv()</span></code></a>, <a class="reference internal" href="../ref-manual/classes/mp/nm_element.html#mp.nm_element.set_node_type_pq" title="mp.nm_element.set_node_type_pq"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">set_node_type_pq()</span></code></a>, for setting the type of a network node and having the relevant elements update their corresponding data model elements.</p>
</section>
</section>
<section id="network-model-elements">
<span id="sec-nm-element"></span><h2><span class="section-number">7.3. </span>Network Model Elements<a class="headerlink" href="#network-model-elements" title="Link to this heading"></a></h2>
<p>A network model element object encapsulates all of the network model parameters for a particular element type. All network model element classes inherit from <a class="reference internal" href="../ref-manual/classes/mp/nm_element.html#mp.nm_element" title="mp.nm_element"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.nm_element</span></code></a> and also, like the container, from a formulation-specific subclass of <a class="reference internal" href="../ref-manual/classes/mp/form.html#mp.form" title="mp.form"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.form</span></code></a>. Each element type typically implements its own subclasses, which are further subclassed per formulation. A given network model element object contains the aggregate network model parameters for <em>all</em> online instances of that element type, stored in the set of matrices and vectors that correspond to the formulation, e.g. <span class="math notranslate nohighlight">\(\BB\)</span>, <span class="math notranslate nohighlight">\(\KK\)</span> and <span class="math notranslate nohighlight">\(\pv\)</span> from <a class="reference internal" href="#equation-eq-gkpx">(7.2)</a> for DC and <span class="math notranslate nohighlight">\(\YY\)</span>, <span class="math notranslate nohighlight">\(\LL\)</span>, <span class="math notranslate nohighlight">\(\MM\)</span>, <span class="math notranslate nohighlight">\(\NN\)</span>, <span class="math notranslate nohighlight">\(\iv\)</span>, and <span class="math notranslate nohighlight">\(\sv\)</span> from <a class="reference internal" href="#equation-eq-ilin">(7.4)</a> and <a class="reference internal" href="#equation-eq-slin">(7.5)</a> for AC.</p>
<p>So, for example, in a system with 1000 in-service transmission lines, the <span class="math notranslate nohighlight">\(\YY\)</span> parameter in the corresponding AC network model element object would be a 2000 <span class="math notranslate nohighlight">\(\times\)</span> 2000 matrix for an aggregate 2000-port element, representing the 1000 two-port transmission lines.</p>
<p>By convention, network model element variables are named <code class="docutils literal notranslate"><span class="pre">nme</span></code> and network model element class names begin with <code class="docutils literal notranslate"><span class="pre">mp.nme</span></code>. <a class="reference internal" href="#fig-net-model-element-classes"><span class="std std-numref">Figure 7.4</span></a> shows the inheritance relationships between a few example network model element classes. Here the <a class="reference internal" href="../ref-manual/classes/mp/nme_bus_acp.html#mp.nme_bus_acp" title="mp.nme_bus_acp"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.nme_bus_acp</span></code></a> and <a class="reference internal" href="../ref-manual/classes/mp/nme_gen_acp.html#mp.nme_gen_acp" title="mp.nme_gen_acp"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.nme_gen_acp</span></code></a> classes are used for all problems with an AC polar formulation, while the AC cartesian and DC formulations use their own respective subclasses.</p>
<figure class="align-center" id="id7">
<span id="fig-net-model-element-classes"></span><img alt="Network Model Element Classes" src="../_images/net-model-element-classes.png" />
<figcaption>
<p><span class="caption-number">Figure 7.4 </span><span class="caption-text">Network Model Element Classes</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="example-elements">
<h3><span class="section-number">7.3.1. </span>Example Elements<a class="headerlink" href="#example-elements" title="Link to this heading"></a></h3>
<p>Here are brief descriptions of the network models for a few simple element types. There are other elements, and the point is that new elements are relatively simple to implement, simply by specifying the nodes, ports and states they add, and the parameters that define the relationships between the states and the port injections.</p>
<section id="bus">
<h4>Bus<a class="headerlink" href="#bus" title="Link to this heading"></a></h4>
<p>A <strong>bus</strong> element inherits from <a class="reference internal" href="../ref-manual/classes/mp/nme_bus.html#mp.nme_bus" title="mp.nme_bus"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.nme_bus</span></code></a> and defines a single node per in-service bus, with no ports or non-voltage states. So it has no model parameters.</p>
</section>
<section id="generator">
<h4>Generator<a class="headerlink" href="#generator" title="Link to this heading"></a></h4>
<p>A <strong>gen</strong> element is a 1-port element that inherits from <a class="reference internal" href="../ref-manual/classes/mp/nme_gen.html#mp.nme_gen" title="mp.nme_gen"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.nme_gen</span></code></a> and defines a single non-voltage state per in-service generator to represent the power injection. It connects to the node corresponding to a particular bus. The only non-zero parameters are <span class="math notranslate nohighlight">\(\KK\)</span> (DC) or <span class="math notranslate nohighlight">\(\NN\)</span> (AC), which are negative identity matrices, since the power injections (into the element) are the negative of the generated power.</p>
</section>
<section id="branch">
<h4>Branch<a class="headerlink" href="#branch" title="Link to this heading"></a></h4>
<p>A <strong>branch</strong> element is a 2-port element that inherits from <a class="reference internal" href="../ref-manual/classes/mp/nme_branch.html#mp.nme_branch" title="mp.nme_branch"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.nme_branch</span></code></a> with no nodes or non-voltage states. It connects to nodes corresponding to two  particular buses. The only non-zero parameters are <span class="math notranslate nohighlight">\(\BB\)</span> and <span class="math notranslate nohighlight">\(\pv\)</span> (DC), or <span class="math notranslate nohighlight">\(\YY\)</span> (AC).</p>
</section>
<section id="load">
<h4>Load<a class="headerlink" href="#load" title="Link to this heading"></a></h4>
<p>A <strong>load</strong> element is a 1-port element that inherits from <a class="reference internal" href="../ref-manual/classes/mp/nme_load.html#mp.nme_load" title="mp.nme_load"><code class="xref mat mat-class docutils literal notranslate"><span class="pre">mp.nme_load</span></code></a> with no ports or states. It connects to the node corresponding to a particular bus. For a simple constant power load, the only non-zero parameters are <span class="math notranslate nohighlight">\(\pv\)</span> (DC) or <span class="math notranslate nohighlight">\(\sv\)</span> (AC), equal to the power consumed by the load.</p>
</section>
</section>
<section id="building-element-parameters">
<h3><span class="section-number">7.3.2. </span>Building Element Parameters<a class="headerlink" href="#building-element-parameters" title="Link to this heading"></a></h3>
<p>Typically, a network model element builds parameters only for its in-service elements, stacking the corresponding parameters into vectors and matrices, with one row per element of that type. For the DC formulation, these are the three parameters <span class="math notranslate nohighlight">\(\BB\)</span>, <span class="math notranslate nohighlight">\(\KK\)</span> and <span class="math notranslate nohighlight">\(\pv\)</span> from <a class="reference internal" href="#sec-nm-formulations-dc"><span class="std std-numref">Section 7.1.1</span></a>. For the AC formulations they are the six parameters, <span class="math notranslate nohighlight">\(\YY\)</span>, <span class="math notranslate nohighlight">\(\LL\)</span>, <span class="math notranslate nohighlight">\(\MM\)</span>, <span class="math notranslate nohighlight">\(\NN\)</span>, <span class="math notranslate nohighlight">\(\iv\)</span>, and <span class="math notranslate nohighlight">\(\sv\)</span> from <a class="reference internal" href="#sec-nm-formulations-ac"><span class="std std-numref">Section 7.1.2</span></a>.</p>
<p>Take, for example, an AC model with two-port transmission lines modeled by a simple series admittance, where the two ports are labeled with <span class="math notranslate nohighlight">\(f\)</span> and <span class="math notranslate nohighlight">\(t\)</span>. For line <span class="math notranslate nohighlight">\(i\)</span> with series admittance <span class="math notranslate nohighlight">\(\cscal{y}^i_s\)</span>, we have</p>
<div class="math notranslate nohighlight" id="equation-eq-single-line-y">
<span class="eqno">(7.9)<a class="headerlink" href="#equation-eq-single-line-y" title="Link to this equation"></a></span>\[\begin{split}\left[\begin{array}{c}
\cscal{i}^i_f \\
\cscal{i}^i_t
\end{array}\right]
= \left[\begin{array}{cc}
\cscal{y}^i_s &amp; -\cscal{y}^i_s \\
-\cscal{y}^i_s &amp; \cscal{y}^i_s
\end{array}\right]
\left[\begin{array}{c}
\cscal{v}^i_f \\
\cscal{v}^i_t
\end{array}\right].\end{split}\]</div>
<p>The individual admittance parameters for the <span class="math notranslate nohighlight">\(n_k\)</span> individual lines are then stacked as follows,</p>
<div class="math notranslate nohighlight" id="equation-eq-stack-y">
<span class="eqno">(7.10)<a class="headerlink" href="#equation-eq-stack-y" title="Link to this equation"></a></span>\[\begin{split}\cmat{Y}_s = \left[\begin{array}{cccc}
     \cscal{y}^1_s &amp; &amp; &amp; \\
     &amp; \cscal{y}^2_s &amp; &amp;\\
      &amp;  &amp; \ddots &amp;  \\
     &amp; &amp; &amp; \cscal{y}^{n_k}_s \\
     \end{array}\right],\end{split}\]</div>
<p>to form the admittance matrix parameter <span class="math notranslate nohighlight">\(\YY\)</span> that we see in <a class="reference internal" href="#equation-eq-ilin">(7.4)</a> for the corresponding element object.</p>
<div class="math notranslate nohighlight" id="equation-eq-all-lines-y2">
<span class="eqno">(7.11)<a class="headerlink" href="#equation-eq-all-lines-y2" title="Link to this equation"></a></span>\[\begin{split}\YY = \left[\begin{array}{cc}
\cmat{Y}_s &amp; -\cmat{Y}_s \\
-\cmat{Y}_s &amp; \cmat{Y}_s
\end{array}\right]\end{split}\]</div>
<p>Stacking the individual port current and voltage variables,</p>
<div class="math notranslate nohighlight" id="equation-eq-stackiv">
<span class="eqno">(7.12)<a class="headerlink" href="#equation-eq-stackiv" title="Link to this equation"></a></span>\[\begin{split}\cvec{i}_f = \left[\begin{array}{c}
     \cscal{i}^1_f \\
     \cscal{i}^2_f \\
     \vdots \\
     \cscal{i}^{n_k}_f \\
     \end{array}\right], \;
\cvec{i}_t = \left[\begin{array}{c}
     \cscal{i}^1_t \\
     \cscal{i}^2_t \\
     \vdots \\
     \cscal{i}^{n_k}_t \\
     \end{array}\right], \;
\cvec{v}_f = \left[\begin{array}{c}
     \cscal{v}^1_f \\
     \cscal{v}^2_f \\
     \vdots \\
     \cscal{v}^{n_k}_f \\
     \end{array}\right], \;
\cvec{v}_t = \left[\begin{array}{c}
     \cscal{v}^1_t \\
     \cscal{v}^2_t \\
     \vdots \\
     \cscal{v}^{n_k}_t \\
     \end{array}\right],\end{split}\]</div>
<p>results in the port injection currents from <a class="reference internal" href="#equation-eq-gki">(7.8)</a> for this aggregate element taking the form</p>
<div class="math notranslate nohighlight" id="equation-eq-all-lines-y">
<span class="eqno">(7.13)<a class="headerlink" href="#equation-eq-all-lines-y" title="Link to this equation"></a></span>\[\begin{split}\GI(\X) &amp;= \Ilin(\X) = \left[\begin{array}{c}
\cvec{i}_f \\
\cvec{i}_t
\end{array}\right]
= \YY
\left[\begin{array}{c}
\cvec{v}_f \\
\cvec{v}_t
\end{array}\right]
= \YY \V.\end{split}\]</div>
<p>When building its parameters, each network model element object also defines an element-node incidence matrix <span class="math notranslate nohighlight">\(C\)</span> for each of its ports and an element-variable incidence matrix <span class="math notranslate nohighlight">\(D\)</span> for each non-voltage states. For example, a transmission line element would define two <span class="math notranslate nohighlight">\(C\)</span> matrices, one mapping branches to their corresponding <em>from</em> bus and the other to their corresponding <em>to</em> bus.</p>
</section>
<section id="aggregation">
<h3><span class="section-number">7.3.3. </span>Aggregation<a class="headerlink" href="#aggregation" title="Link to this heading"></a></h3>
<p>Since the model parameters are consistent across all network model elements for a given formulation, and the connectivity of the elements is captured in the <span class="math notranslate nohighlight">\(C\)</span> and <span class="math notranslate nohighlight">\(D\)</span> incidence matrices for each element type, the network model object can assemble the parameters from all elements into a single aggregate network model characterized by parameters of the same form. This aggregate model can then be used to compute port or node injections from the aggregate system state, as well as any needed derivatives of these injection functions.</p>
<p>For more details on how the aggregation is done, see <a class="reference internal" href="references.html#tn5" id="id3"><span>[TN5]</span></a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="data-model-converter.html" class="btn btn-neutral float-left" title="6. Data Model Converter Object" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="math-model.html" class="btn btn-neutral float-right" title="8. Mathematical Model Object" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1996-2024, Power Systems Engineering Research Center (PSERC).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>